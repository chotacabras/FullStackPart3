(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(41)},39:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(15),r=t.n(a),o=t(0),u=t.n(o),l=t(2),c=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,r=e.newNumber,o=e.handleNumberChange;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"name: ",u.a.createElement("input",{value:t,onChange:a})),u.a.createElement("div",null,"number: ",u.a.createElement("input",{value:r,onChange:o})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"}," add ")))},s=function(e){var n=e.newFilter,t=(e.showAll,e.setNewFilter),a=e.setShowAll;return u.a.createElement("div",null,"filter shown with ",u.a.createElement("input",{value:n,onChange:function(e){t(e.target.value),null!==n&&a(!1)}}))},i=function(e){var n=e.person;return u.a.createElement(u.a.Fragment,null,n.name," - ",n.number)},m=t(3),d=t.n(m),f="/api/persons",h={getAll:function(){return d.a.get(f).then(function(e){return e.data})},create:function(e){return d.a.post(f,e).then(function(e){return e.data})},deletePerson:function(e){return d.a.delete("".concat(f,"/").concat(e.id)).then(function(e){return e.data})},replaceNumber:function(e,n){return d.a.put("".concat(f,"/").concat(e.id),n).then(function(e){return e.data})}},b=function(e){var n=e.person,t=e.setPersons,a=e.persons,r=e.setBadMessage;return u.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to delete ".concat(n.name," from your phonebook?"))&&(h.deletePerson(n).catch(function(e){r("Information from ".concat(n.name," was already deleted from the server")),setTimeout(function(){r(null)},3e3)}),t(a.filter(function(e){return n.id!==e.id})))}},"delete")},w=function(e){var n=e.showAll,t=e.persons,a=e.newFilter,r=e.setPersons,o=e.setBadMessage,l=n?t:t.filter(function(e){return e.name.toLowerCase().includes(a.toLowerCase())});return t?l.map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement(i,{person:e})," ",u.a.createElement(b,{person:e,setPersons:r,persons:t,setBadMessage:o}))}):null},p=function(e){var n=e.goodMessage,t=e.badMessage;return!t&&n?u.a.createElement("div",{className:"success"},n):!n&&t?u.a.createElement("div",{className:"error"},t):null},E=function(){var e=Object(o.useState)(null),n=Object(l.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)(""),i=Object(l.a)(r,2),m=i[0],d=i[1],f=Object(o.useState)(""),b=Object(l.a)(f,2),E=b[0],v=b[1],g=Object(o.useState)(""),j=Object(l.a)(g,2),N=j[0],O=j[1],A=Object(o.useState)(!0),C=Object(l.a)(A,2),S=C[0],P=C[1],y=Object(o.useState)(null),M=Object(l.a)(y,2),k=M[0],F=M[1],B=Object(o.useState)(null),T=Object(l.a)(B,2),I=T[0],J=T[1];Object(o.useEffect)(function(){h.getAll().then(function(e){a(e)})},[]);var L=function(e,n){return e.name===n.name};return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(p,{badMessage:I,goodMessage:k}),u.a.createElement("div",null,u.a.createElement(s,{newFilter:N,showAll:S,setNewFilter:O,setShowAll:P})),u.a.createElement("h2",null,"add a new person"),u.a.createElement(c,{addPerson:function(e){e.preventDefault();for(var n=0,r={name:m,number:E},o=0;o<t.length;o++)L(r,t[o])&&(n=1,window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&(F("Updated ".concat(m)),h.replaceNumber(t[o],r).then(function(e){return a(t.map(function(n){return n.name!==e.name?n:e}))}),setTimeout(function(){F(null)},3e3),d(""),v("")));0===n&&(h.create(r).then(function(e){a(t.concat(e)),F("Added ".concat(m)),setTimeout(function(){F(null)},3e3)}).catch(function(e){J(e.response.data.error),setTimeout(function(){J(null)},6e3)}),d(""),v(""))},newName:m,handleNameChange:function(e){d(e.target.value)},newNumber:E,handleNumberChange:function(e){v(e.target.value)}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(w,{showAll:S,persons:t,newFilter:N,setPersons:a,setBadMessage:J}))};t(39);r.a.render(u.a.createElement(E,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.67ed144c.chunk.js.map